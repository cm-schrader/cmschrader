import{S as _,M as A,a as B,L as I,B as k,b as H,c as G,m as S,d as g,V as m,e as O,P as V,W,C}from"./vendor.3fe77d69.js";const q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(e){if(e.ep)return;e.ep=!0;const a=i(e);fetch(e.href,a)}};q();const D=Symbol("Star"),et=Symbol("Planet"),R=Symbol("DwarfPlanet"),z=Symbol("Asteroid"),N=Symbol("Commet");var h=2e9,L;const j=667408e-16,x=400;function P(n){return n*Math.PI/180}class it{constructor(t,i,s,e,a,r,f,c,M,d,w,v,b,l,u){this.name=i,this.mass=r,this.bodyType=e,this.color=b,this.parent=s,this.radius=a,this.a=f,this.i=P(c),this.e=M,this.timeOfPeriapsis=d,this.raan=P(w),this.w=P(v),this.lastScale=-1,this.children=[],this.parent!==null&&this.parent.children.push(this);var o=.66;if(this.bodyType===D&&(o=1),(this.bodyType===z||this.bodyType===N)&&(o=.4),this.bodyType===R&&(o=.5),this.markerGeometry=new _(o,16,8),this.markerMaterial=new A({color:this.color}),this.markerMesh=new B(this.markerGeometry,this.markerMaterial),t.add(this.markerMesh),this.realGeometry=new _(1,32,16),this.realMaterial=new A({color:this.color,wireframe:!0}),this.realMesh=new B(this.realGeometry,this.realMaterial),t.add(this.realMesh),this.label=document.createElement("a"),this.label.style.position="absolute",this.label.style.fontSize=o*2+"rem",this.label.className="spaceLabel",this.label.innerHTML=this.name,l==null&&u||(u||(this.label.target="blank"),this.label.href="https://en.wikipedia.org/w/index.php?search="+this.name+"&title=Special%3ASearch&go=Go&ns0=1",l!==void 0&&(this.label.href=l)),document.getElementById("spaceText").appendChild(this.label),this.parent!=null){this.orbitMaterial=new I({color:this.color}),this.orbitGeometry=new k;const y=new Float32Array(x*3+3);this.orbitGeometry.setAttribute("position",new H(y,3)),this.orbit=new G(this.orbitGeometry,this.orbitMaterial),t.add(this.orbit),this.orbitPoints=[];for(var p=0;p<2*Math.PI;p+=2*Math.PI/x)this.orbitPoints.push(this.stateVector(p))}}get mu(){return this.parent===null?0:j*this.parent.mass}get h(){return Math.sqrt(this.mu*this.a*(1-Math.pow(this.e,2)))}get T(){return 2*Math.PI*Math.sqrt(Math.pow(this.a,3)/this.mu)}get QxX(){return S([[-Math.sin(this.raan)*Math.cos(this.i)*Math.sin(this.w)+Math.cos(this.raan)*Math.cos(this.w),-Math.sin(this.raan)*Math.cos(this.i)*Math.cos(this.w)-Math.cos(this.raan)*Math.sin(this.w),Math.sin(this.raan)*Math.sin(this.i)],[Math.cos(this.raan)*Math.cos(this.i)*Math.sin(this.w)+Math.sin(this.raan)*Math.cos(this.w),Math.cos(this.raan)*Math.cos(this.i)*Math.cos(this.w)-Math.sin(this.raan)*Math.sin(this.w),-Math.cos(this.raan)*Math.sin(this.i)],[Math.sin(this.i)*Math.sin(this.w),Math.sin(this.i)*Math.cos(this.w),Math.cos(this.i)]])}trueAnom(t){t=(t-this.timeOfPeriapsis)%this.T;let i;if(this.e===0)i=Math.PI*2/this.T*t;else{let s=t*2*Math.PI/this.T,e=Number.MAX_VALUE,a=s;for(;Math.abs(a-e)>.01;)e=a,a=a-(a-this.e*Math.sin(a)-s)/(1-this.e*Math.cos(a));i=2*Math.atan(Math.sqrt(1+this.e)/Math.sqrt(1-this.e)*Math.tan(a/2))}return i}stateVector(t){if(this.parent==null)return[0,0,0,0,0,0];let i=this.QxX,s=S([[Math.cos(t)],[Math.sin(t)],[0]]);s=g(Math.pow(this.h,2)/this.mu/(1+this.e*Math.cos(t)),s),s=g(i,s);let e=S([[-Math.sin(t)],[this.e+Math.cos(t)],[0]]);return e=g(this.mu/this.h,e),e=g(i,e),[s._data[0],s._data[1],s._data[2],e._data[0],e._data[1],e._data[2]]}transform(s,i){var s=T(s),e=T(L.stateVector(L.trueAnom(i)));return s.equals(e)?new m(0,0,0):(s.multiplyScalar(1/h),s.clone())}getOffset(t){var i;return this.parent!=null?(i=T(this.parent.stateVector(this.parent.trueAnom(t))),i.add(this.parent.getOffset(t))):i=new m(0,0,0),i}drawOrbit(){if(this.parent==null)return;const t=this.orbit.geometry.attributes.position.array;let i=this.timeOfPeriapsis,s,e=0;this.orbitPoints.forEach(a=>{s=this.transform(a,i).toArray(),t[e++]=s[0],t[e++]=s[1],t[e++]=s[2],i+=this.T/x}),t[e++]=t[0],t[e++]=t[1],t[e++]=t[2],this.orbit.geometry.attributes.position.needsUpdate=!0}update(t,i){var s=60;this.radius/h;var e=this.transform(this.stateVector(this.trueAnom(t)),t),a=Q(e,i);this.a/h<2&&this.a!==0?(this.markerMesh.visible=!1,this.realMesh.visible=!1,this.label.style.visibility="hidden",typeof this.orbit!="undefined"&&(this.orbit.visible=!1)):(this.markerMesh.visible=!0,this.realMesh.visible=!1,typeof this.orbit!="undefined"&&(this.orbit.visible=!0,this.lastScale!=h&&(this.drawOrbit(),this.lastScale=h)),this.markerMesh.position.copy(e),a.x>s&&a.x<window.innerWidth-s&&a.y>s&&a.y<window.innerHeight-s&&this.a/h>4&&this.a!==0?(this.label.style.visibility="visible",this.label.style.left=a.x+10+"px",this.label.style.top=a.y-20+"px"):this.label.style.visibility="hidden"),this.children.forEach(r=>{r!==null&&r.update(t,i)})}}function F(n){L=n}function X(n){h=n}function Q(n,t){var i=n.clone().project(t);return i.x=(i.x+1)/2*window.innerWidth,i.y=-(i.y-1)/2*window.innerHeight,i}function T(n){return new m(n[0],n[2],n[1])}function st(n){return new Date(n+" 00:00:00").getTime()/1e3}var U="/assets/space_ft.eb93c15c.png",Y="/assets/space_bk.9ec66f0b.png",K="/assets/space_up.11da0299.png",$="/assets/space_dn.b13ad2bf.png",J="/assets/space_rt.af571e8b.png",Z="/assets/space_lf.64160502.png";function at(){const n=new O,t=new V(90,window.innerWidth/window.innerHeight,.1,1e6),i=new W({canvas:document.querySelector("#space")});i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),t.position.set(0,40,20),t.lookAt(new m(0,0,0)),t.updateMatrixWorld();const e=new C().load([U,Y,K,$,J,Z]);return n.background=e,{scene:n,renderer:i,camera:t}}function nt(n,t,i,s,e,a,r){var f=Date.now(),c=e,M=f,d=0;function w(){requestAnimationFrame(w),f+=(Date.now()-M)*c,M=Date.now(),t.camera.position.set(30*Math.sin(d),40*Math.cos(d),30*Math.cos(d)),t.camera.lookAt(new m(0,0,0)),t.camera.updateMatrixWorld(),d+=25e-5,n.update(f,t.camera),t.renderer.render(t.scene,t.camera)}window.addEventListener("resize",v,!1);function v(){t.camera.aspect=window.innerWidth/window.innerHeight,t.camera.updateProjectionMatrix(),t.renderer.setSize(window.innerWidth,window.innerHeight)}function b(E){X(Math.pow(window.scrollY,2)*a+s),c=e+Math.pow(window.scrollY/r,2),document.getElementById("scaleText").innerHTML="Distance Scale: x1/"+Math.round(h).toLocaleString()+"<br/>Time Scale: x"+Math.round(c*1e3).toLocaleString()}b(),F(n),document.getElementById("simtitle").innerHTML=i,document.addEventListener("scroll",b),document.getElementById("scaleText").innerHTML="Distance Scale: x1/"+Math.round(h).toLocaleString()+"<br/>Time Scale: x"+Math.round(c*1e3).toLocaleString();var l=!1,u=document.getElementById("hide"),o=document.getElementById("content");u.addEventListener("click",function(E){l?(u.innerHTML="Hide Content",o.style.visibility="hidden"):(u.innerHTML="Show Content",o.style.visibility="hidden"),l=!l});const p=window.location.search,y=new URLSearchParams(p);console.log(y.get("view")),y.get("view")=="space"&&(document.getElementById("hide").style.display="none",document.getElementById("menu")&&(document.getElementById("menu").style.display="none"),o.style.visibility="hidden"),w()}export{z as A,it as B,N as C,R as D,et as P,at as S,D as a,nt as b,st as d};
